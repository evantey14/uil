extends layout
block head
    script(src="./ace-builds/src-noconflict/ace.js")
    link(rel='stylesheet', href='/stylesheets/upload.css')
block content
    h1= title
    h4= prompt
    if !text
        form(action="/pdf" enctype="multipart/form-data" method="post")
            input(type="file", name="upload")
            br
            button(type="submit", value="upload")= "SUBMIT"
    if text
        div(id="editor")= text
        form(id="jsonsubmit" action="/pdfsub" enctype="multipart/form-data" method="post")
            input.hide(id="divin" type="text" name="in")
            input.hide(type="submit" value = "in")
        button(id="sub" type="button")= "Submit"
    script.
        var editor = ace.edit("editor");
        editor.setTheme("ace/theme/monokai");
        editor.getSession().setMode("ace/mode/javascript");
        $(document).ready(function() { 
            $('#sub').click(function(){
                var inside = $('#editor').text();
                inside= editor.getValue();
                console.log(inside);
                $('#divin').val(inside);
                var inin = $('#divin').val();
                $('#jsonsubmit').submit();
            });
        });
